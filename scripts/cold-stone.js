const isDarkMode=window.matchMedia("(prefers-color-scheme: dark)").matches;"serviceWorker"in navigator&&window.addEventListener("load",()=>{const e=window.COLD_STONE.root+"sw.js";navigator.serviceWorker.register(e)});const path=location.pathname,navLinkList=Array.from(document.querySelectorAll(".nav-list-item")),navs=["/tags/","/about/","/friends/","/projects/","/archives/","/categories/"];"/"===path||/page/.test(path)?navLinkList[0].classList.add("active"):navs.forEach(function(e,t){if(e===path){const t=navLinkList.find(function(t){return t.dataset.link===e});t&&t.classList.add("active")}}),hljs.initHighlightingOnLoad();const tocLinkList=document.querySelectorAll(".toc-link");tocLinkList.forEach(function(e){const t=e.href.replace(location.origin+"/",location.href);e.setAttribute("href",t)});const loader=document.getElementById("loader"),utteranc=document.getElementById("utteranc");if(utteranc){const e=document.createElement("script");e.async=!0,e.crossOrigin="anonymous",e.src="https://utteranc.es/client.js",e.setAttribute("repo",window.COLD_STONE.repo),e.setAttribute("issue-term","pathname"),isDarkMode?e.setAttribute("theme","github-dark"):e.setAttribute("theme","github-light"),utteranc.appendChild(e);const t=setTimeout(function(){loader.remove(),clearTimeout(t)},3e3)}const back=document.getElementById("back");back&&back.addEventListener("click",function(){history.back()});const backTop=document.getElementById("backTop");backTop&&(window.addEventListener("scroll",()=>{const{scrollTop:e,scrollHeight:t,clientHeight:n}=document.scrollingElement;e+n>=t?backTop.classList.add("show"):backTop.classList.remove("show")}),backTop.addEventListener("click",function(){window.scroll({top:0,left:0,behavior:"smooth"})}));const canvas=document.getElementById("prelude");if(canvas){var leon,ANIMATE_TIME=2,THREE_MINUTE=18e4,sw=window.innerWidth,sh=window.innerHeight,ctx=canvas.getContext("2d"),pixelRatio=window.devicePixelRatio,animatedTime=localStorage.getItem("animatedTime");function init(){canvas.width=sw*pixelRatio,canvas.height=sh*pixelRatio,ctx.scale(pixelRatio,pixelRatio),leon=new LeonSans({text:window.COLD_STONE.author||"Cold Stone",color:["#000"],size:80,weight:200}),draw()}function draw(){ctx.clearRect(0,0,sw,sh);const e=(sw-leon.rect.w)/2,t=(sh-leon.rect.h)/2;leon.position(e,t),leon.draw(ctx),requestAnimationFrame(draw)}function animate(){const e=leon.drawing.length;for(let t=0;t<e;t++)TweenMax.fromTo(leon.drawing[t],ANIMATE_TIME,{value:0},{delay:.05*t,value:1,ease:Power4.easeOut});const t=setTimeout(function(){clearTimeout(t),document.body.removeChild(canvas),localStorage.setItem("animatedTime",Date.now())},1e3*ANIMATE_TIME)}!animatedTime||Date.now()>parseInt(animatedTime)+THREE_MINUTE?(init(),animate()):document.body.removeChild(canvas)}